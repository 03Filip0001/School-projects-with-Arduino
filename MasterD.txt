#include <Bounce2.h>
#include <SoftwareSerial.h>

Bounce btn = Bounce();
SoftwareSerial master(2,3); // RX, TX

#define BTN 4
#define LED 8

bool ON = false;

void setup() {

  pinMode(BTN, INPUT_PULLUP);
  btn.attach(BTN);
  btn.interval(5);

  pinMode(LED, OUTPUT);
  
  Serial.begin(9600);

  master.begin(9600);
}

void loop() {
  btn.update();

  if(btn.fell())
  {
    ON = !ON;
  }

  if(ON)
  {
    digitalWrite(LED, HIGH);
    master.write(0xFF);
    master.flush();
  }
  else
  {
    digitalWrite(LED, LOW);
    master.write((byte)0x00);
    master.flush();
  }
  char words[20];
  int i = 0;
  while(master.available())
  {
    words[i] = master.read();
    i++;
  }

  for(i = 0; i < 20; i++)
  {
    Serial.print(words[i]);
    Serial.flush();
  }
  Serial.println();
}